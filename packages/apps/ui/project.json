{
  "name": "ui",
  "$schema": "../../../node_modules/nx/schemas/project-schema.json",
  "sourceRoot": "packages/apps/ui",
  "projectType": "application",
  "tags": ["no-deploy:shared", "ui"],
  "// targets": "to see all targets run: nx show project ui --web",
  "targets": {
    "cdk-bootstrap": {},
    "cdk-deploy": {},
    "build": {
      "cache": false,
      "configurations": {
        "dev": {},
        "prd": {}
      }
    },
    "dev": {
      "continuous": true,
      "command": "next dev --port 3002 --turbopack",
      "options": {
        "cwd": "{projectRoot}"
      }
    },
    "dev-with-deps": {
      "continuous": true,
      "command": "next dev --port 3002 --turbopack",
      "options": {
        "cwd": "{projectRoot}"
      },
      "dependsOn": [
        {
          "projects": [
            "api",
            "workflow-ingestion",
            "workflow-evaluation",
            "workflow-worker"
          ],
          "target": "serve"
        },
        {
          "projects": ["workflow-worker"],
          "target": "start-ngrok-tunnel"
        }
      ]
    },
    "self-hosted-build": {
      "executor": "@workspace/workspace-plugins:self-hosted-nextjs-build",
      "options": {},
      "dependsOn": [],
      "configurations": {
        "dev": {},
        "prd": {}
      }
    },
    "docker-build": {
      "options": {
        "env": {}
      },
      "configurations": {
        "dev": {
          "env": {
            "TAG_PREFIX": "dev-"
          }
        },
        "prd": {
          "env": {
            "TAG_PREFIX": "prd-"
          }
        }
      }
    },
    "docker-push": {
      "options": {},
      "configurations": {
        "dev": {
          "env": {
            "TAG_PREFIX": "dev-"
          }
        },
        "prd": {
          "env": {
            "TAG_PREFIX": "prd-"
          }
        }
      }
    },
    "helm-deploy": {
      "configurations": {
        "local": {
          "env": {
            "STAGE": "local",
            "TAG_PREFIX": "dev-"
          }
        },
        "dev": {
          "env": {
            "STAGE": "dev",
            "TAG_PREFIX": "dev-"
          }
        },
        "prd": {
          "env": {
            "STAGE": "prd",
            "TAG_PREFIX": "prd-"
          }
        }
      }
    },
    "update-image-tag": {
      "configurations": {
        "dev": {
          "filePath": "{projectRoot}/argocd/dev.values.yaml",
          "valuePrefix": "dev-"
        },
        "prd": {
          "filePath": "{projectRoot}/argocd/prd.values.yaml",
          "valuePrefix": "prd-"
        }
      }
    },
    "openapi-gen": {
      "command": "pnpm exec openapi typegen http://localhost:8000/openapi.json --client > src/file-classifier-api.d.ts",
      "options": {
        "cwd": "{projectRoot}"
      }
    },
    "deploy": {
      "executor": "@workspace/workspace-plugins:proxy-executor",
      "options": {
        "target": "cdk-deploy"
      },
      "dependsOn": [
        "^build",
        {
          "projects": "api",
          "target": "deploy",
          "params": "forward"
        }
      ]
    }
  }
}
